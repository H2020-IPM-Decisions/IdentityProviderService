name: Build Docker Image And Push To Registry

on: [push]
  # push:
  #   tags:
  #     - 'v*.*.*'
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - name: Set tag
      id: get_tag_name
      run: echo ::set-output name=VERSION::${GITHUB_REF/refs\/tags\//}
    - name: Echo Tag
      run: echo 'Tag is ${{ steps.get_tag_name.outputs.VERSION }}'
    # - name: Build and Push docker
    #   uses: elgohr/Publish-Docker-Github-Action@master
    #   env:
    #     URL_PORT: 5000
    #     BUILD_VERSION: 1.0.2
    #   with:
    #     name: h2020ipmdecisions/identityproviderservice
    #     username: ${{ secrets.DOCKER_USERNAME }}
    #     password: ${{ secrets.DOCKER_PASSWORD }}
    #     workdir: Docker
    #     dockerfile: Dockerfile
    #     context: .
    #     buildargs: URL_PORT,BUILD_VERSION
    #     tags: "latest"
